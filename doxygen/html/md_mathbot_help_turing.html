<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MathBot: turing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MathBot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">turing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>:::topics turing</p>
<h1>Turing Completeness</h1>
<p>See <code>{{prefix}}help calc-more</code> for a list of basic builtin functions. See <code>{{prefix}}help turing-library</code> for builtin functions that operate over more complicated data structures.</p>
<h2>Introduction</h2>
<p>The calculator is actually Turing complete, and can function as it's own small programming language, allowing you to perform more complicated operations.</p>
<p>Note that these features are currently in <em>beta</em> and may be unstable. More complete documentation will be coming later.</p>
<ul>
<li>Any variables that are assigned are contained to the channel that they are created in.</li>
<li>Values are purged at least once every 24 hours, so don't rely on the bot to store important information for you.</li>
</ul>
<h2>A note on commas</h2>
<p>Commas are used in most programming languages to separate expressions, for example in lists of arguments. In the MathBot calculator, expressions are <em>mostly</em> optional, however may have to be used in some situations in order to prevent the parser joining adjacent expressions.</p>
<p>For example <code>[x y z]</code> is the same as <code>[x, y, z]</code>. <code>[x y (z)]</code> is <em>not</em> the same as <code>[x, y, (z)]</code>. In the first case, <code>y(z)</code> is interpreted as a function call. Adding the comma prevents this from happening.</p>
<p>Adding additional commas is a bad idea and will probably result in parsing errors.</p>
<p>:::page-break</p>
<h2>Language Features</h2>
<h3>Assignments</h3>
<p>Assigning variables is simple: </p><div class="fragment"><div class="line">x = 7</div></div><!-- fragment --><p>Recalling them works the same as it normally would </p><div class="fragment"><div class="line">x</div></div><!-- fragment --><h3>If Statements</h3>
<p>If statements are use as follows: </p><div class="fragment"><div class="line">if (condition, expression_if_true, expression_if_false)</div></div><!-- fragment --><p>So for instance <code>if(1 &lt; 2, 3, 4)</code> would evaluate to <code>3</code>, but <code>if(1 &gt; 2, 3, 4)</code> would evaluate to <code>4</code>.</p>
<p>Unlike normal functions, the arguments that are passed to the <code>if</code> statement are only evaluated when they are used internally, not beforehand. This means that only one of <code>expression_if_true</code> and <code>expression_if_false</code> will ever be evaluated.</p>
<p>Additional arguments can be passed in order to make the function act as an if-elif-else block. </p><div class="fragment"><div class="line">ifelse(cond_1, expr_1,</div><div class="line">    cond_2, expr_2,</div><div class="line">    cond_3, expr_3,</div><div class="line">    otherwise</div><div class="line">)</div></div><!-- fragment --><p>Which is the same as </p><div class="fragment"><div class="line">if (cond_1, expr_1,</div><div class="line">    if (cond_2, expr_2,</div><div class="line">        if (cond_3, expr_3,</div><div class="line">            otherwise</div><div class="line">        )</div><div class="line">    )</div><div class="line">)</div></div><!-- fragment --><p>:::page-break</p>
<h3>Defining Functions</h3>
<p>Anonymous functions are defined using the following syntax </p><div class="fragment"><div class="line">(arg1 arg2 arg3 ...) -&gt; expression</div></div><!-- fragment --><p>Example: </p><div class="fragment"><div class="line">(x y z) -&gt; (x * y) / z</div></div><!-- fragment --><p>These can then be assigned to variables </p><div class="fragment"><div class="line">double = (x) -&gt; x * 2</div></div><!-- fragment --><p>Alternatively, functions defined at the top level can be given names. </p><div class="fragment"><div class="line">add(x y) = x + y</div></div><!-- fragment --><p>Anonymous functions that take a single argument can be defined using a shorthand that excludes the parenthesis. </p><div class="fragment"><div class="line">a -&gt; a + 1</div></div><!-- fragment --><h3>Macro Functions</h3>
<p><em>Macros may be removed at some point in the future, since they serve no purpose in a lazy language.</em></p>
<p>Macros are similar to normal functions, with the difference that all arguments have to be evaluated on demand: Your function gets a series of functions, which take no arguments and return the original value.</p>
<p>Macros are defined using the following syntax. </p><div class="fragment"><div class="line">(arg1 arg2 arg3 ...) ~&gt; expression</div></div><!-- fragment --><p> Note the use of <code>~&gt;</code> instead of <code>-&gt;</code>.</p>
<p>For example, the following snippet will evaluate to <code>8</code> </p><div class="fragment"><div class="line">sum_macro(x, y) ~&gt; x() + y()</div><div class="line">sum_macro(3, 5)</div></div><!-- fragment --><p>:::page-break</p>
<h3>Lists</h3>
<p>"Lists" are data structures that act like stacks: you can quickly access the head of a list, adding and removing things from it as required. You can access things further down a list but it'll be slower.</p>
<p>Lists are defined with square braces: <code>[1 2 3 4]</code>. The empty list is declared with <code>[]</code>.</p>
<p>The <code>:</code> operator inserts an item at the head of a list. </p><div class="fragment"><div class="line">1:[2 3 4] # Results in [1 2 3 4]</div></div><!-- fragment --><p>The &lsquo;&rsquo;` operator retrieves an item from the head of a list. If the list is empty, an error occurs. </p><div class="fragment"><div class="line">&#39;[1 2 3 4] # Results in 1</div></div><!-- fragment --><p>The <code>\</code> operator retrieves the tail of the list, i.e. all elements except the first. If the list is empty, an error occurs. </p><div class="fragment"><div class="line">\[1 2 3 4] # Results in [2 3 4]</div></div><!-- fragment --><h3>Text</h3>
<p>"Strings" are defined as lists of "glyphs", where a glyph is a single character (like the letter <code>a</code>, digit <code>7</code>, or the poop emoji). String are denoted with double-quotes: "Hello, world!". Glyphs are denoted with the <code>;</code> character followed by the glyph itself.</p>
<p>Appending a glyph to the start of a string (the brakets aren't required here) </p><div class="fragment"><div class="line">(;h):(&quot;ello&quot;)</div></div><!-- fragment --><p>Note that <code>;</code> is represents a single space.</p>
<p>:::page-break</p>
<h3>Assoc-Lists</h3>
<p>"Assoc-Lists" are a data structure similar to dictionaries. That means you can associate certain keys to certain values. For instance i could create a dictionary that says certain books refer to certain authors.</p>
<p>Assoc-Lists are implemented as lists, and they consist of a list of pairs: <code>[["a" 1] ["b" 2] ["c" 3]]</code> would be an assoc list mapping. </p><div class="fragment"><div class="line">&quot;a&quot; -&gt; 1</div><div class="line">&quot;b&quot; -&gt; 2</div><div class="line">&quot;c&quot; -&gt; 3</div></div><!-- fragment --><p> You can add more key-value pairs to the list using the <code>assoc</code> function: <code>assoc([["a" 1] ["b" 2] ["c" 3]] "hello" 55)</code> would result in the assoc-list <code>[["a" 1] ["b" 2] ["c" 3] ["hello" 55]]</code>. One key can only be mapped to one element, for instance you can't get <code>[["a" 1] ["a" 2] ["b" 3]]</code>.</p>
<p>You can get a value given a key by using the function <code>get</code>: <code>get([["a" 1] ["b" 2] ["c" 3] ["hello" 55]] "hello")</code> would return <code>55</code>.</p>
<p>You can remove a key with the function <code>aremove</code>: <code>aremove([["a" 1] ["b" 2] ["c" 3] ["hello" 55]] "b")</code> would return <code>[["a" 1] ["c" 3] ["hello" 55]]</code>.</p>
<h3>Sets</h3>
<p>Sets are lists where every element is unique, in order to make a set simply use the function <code>to_set</code>. As an example: <code>to_set([2,1,5,2,3,5,1])</code> would return <code>[3,1,5,2]</code>. Note that order isn't preserved, for instance <code>to_set([1,2,3,4])</code> gives <code>[1, 3, 4, 2]</code>.</p>
<p>Adding an element to the set is done with <code>set_insert</code>: <code>set_insert([1,2,3,4], 2)</code> becomes <code>[4,3,2,1]</code>.</p>
<p>:::page-break</p>
<h1>Memoisation</h1>
<p>User-defined non-macro functions have memoisation applied to them automatically.</p>
<p>Thus, the following code executes quickly, even for large <code>x</code>: </p><div class="fragment"><div class="line">fib(x) -&gt; if (x &lt; 2, 1, fib(x - 2) + fib(x - 1))</div></div><!-- fragment --><p>The memoisation is not foolproof and could probably do with some improvement.</p>
<h1>Tail recursion optimisation</h1>
<p>Simple situations for tail-recursion are optimised in order to conserve stack frames.</p>
<p>For example, the standard library defines the <code>reverse</code> function as the following: </p><div class="fragment"><div class="line">_reverse(input output) -&gt; if(!input output _reverse(\input &#39;inputs:output))</div><div class="line">reverse(list) -&gt; _reverse(input .)</div></div><!-- fragment --><p> Which works by repeatedly taking the top item from the input list and perpending it to the output list. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
